{% extends 'layouts/auth.html.twig' %}

{% set pagetitle = 'title.user_update_avatar'|trans %}
{% block title pagetitle %}

{% block content %}
    <h1 class="h3 fw-bold">{{ pagetitle }}</h1>
    <div class="form mt-5">
        {{ form_start(form, {attr: {class: 'php-email-auth'}}) }}
            <div class="mb-3">
                <div class="row align-items-stretch">
                    <div class="col-12 mb-3 col-sm-6 mb-sm-0">
                        <label for="" class="form-label">{{ 'label.update_avatar'|trans }}</label>
                        <div class="ratio-1x1">
                            {% if user.avatar is not null %}
                                <img src="{{ asset('uploads/user/' ~ user.avatar) }}" width="100%" class="rounded border" alt="{{ user.nickname }}">
                            {% else %}
                                {% component alert with {type: 'info', class: 'h-100 d-flex align-items-center text-center'} %}
                                    {% block content %}
                                        {{ "message.update_avatar"|trans }}
                                    {% endblock %}
                                {% endcomponent %}
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-12 col-sm-6">
                        <div class="mb-3">
                            {{ form_label(form.avatarFile) }}
                            <div class="ratio-1x1">
                                {{ form_widget(form.avatarFile) }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="d-flex flex-column gap-2 align-items-center">
                <button type="submit" class="w-100 mb-3">
                    <i class="bi bi-pencil-square me-2"></i>
                    {{ 'action.edit'|trans }}
                </button>
            </div>
        {{ form_end(form) }}
    </div>
{% endblock %}
