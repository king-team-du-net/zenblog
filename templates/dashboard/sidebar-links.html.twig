{% set routename = app.request.get('_route') %}
{% set random = generateReference(5) %}

{% if not is_granted('ROLE_USER') %}
    <nav class="nav flex-column pb-2 pb-lg-4 mb-3">
        <a href="{{ path('dashboard_index') }}" class="nav-link fw-semibold py-2 px-0 {% if routename == "dashboard_administrator_index" or routename == "dashboard_moderator_index" or routename == "dashboard_user_index" %}active{% endif %}">
            {% if is_granted("ROLE_USER") %}
                <i class="ai-settings fs-5 opacity-60 me-2"></i> {{'Dashboard User'|trans}}
            {% elseif is_granted("ROLE_ADMINISTRATOR") %}
                <i class="ai-settings fs-5 opacity-60 me-2"></i> {{'Dashboard Administrator'|trans}}
            {% elseif is_granted("ROLE_ADMIN") %}
                <i class="ai-settings fs-5 opacity-60 me-2"></i> {{'Dashboard Admin'|trans}}
            {% elseif is_granted("ROLE_EDITOR") %}
                <i class="ai-settings fs-5 opacity-60 me-2"></i> {{'Dashboard Editor'|trans}}
            {% endif %}
        </a>
    </nav>
{% endif %}

{# Super Administrator role sidebar links #}
{% if is_granted('ROLE_ADMINISTRATOR') %}
    <li class="nav-item">
        <a href="{{ path('dashboard_index') }}" class="nav-link {% if routename == "dashboard_index" %}active{% endif %}">
            <i class="bi bi-house fs-5 opacity-60 me-2"></i> {{ 'menu.dashboard_index'|trans}}
        </a>
    </li>
    <li class="nav-item">
        <a href="#account-submenu-{{random}}" data-bs-toggle="collapse" data-bs-parent="#dashboard-menu" class="nav-link dropdown-toggle">
            <i class="fas fa-user-cog fa-fw"></i> {{ 'menu.account'|trans}}
        </a>
        <ul id="account-submenu-{{random}}" class="nav flex-column ml-3 collapse {% if routename == "dashboard_user_index" or routename == "dashboard_user_update_profile" or routename == "dashboard_user_update_avatar" or routename == "dashboard_user_update_password" %}show{% endif %}">
            <li class="nav-item">
                <a href="{{ path('dashboard_user_index') }}" class="nav-link {% if routename == "dashboard_user_index" or routename == "dashboard_user_update_profile" or routename == "dashboard_user_update_avatar" or routename == "dashboard_user_update_password" %}active{% endif %}">
                    {{'menu.user_index'|trans}}
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('dashboard_user_update_profile') }}" class="nav-link {% if routename == "dashboard_user_update_profile" %}active{% endif %}">
                    {{ 'menu.user_update_profile'|trans}}
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('dashboard_user_update_avatar') }}" class="nav-link {% if routename == "dashboard_user_update_avatar" %}active{% endif %}">
                    {{ 'menu.user_update_avatar'|trans}}
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('dashboard_user_update_password') }}" class="nav-link {% if routename == "dashboard_user_update_password" %}active{% endif %}">
                    {{ 'menu.user_update_password'|trans}}
                </a>
            </li>
        </ul>
    </li>
{# Administrator role sidebar links #}
{% elseif is_granted('ROLE_ADMIN') %}
    <li class="nav-item">
        <a href="{{ path('dashboard_index') }}" class="nav-link {% if routename == "dashboard_index" %}active{% endif %}">
            <i class="bi bi-house fs-5 opacity-60 me-2"></i> {{ 'menu.dashboard_index'|trans}}
        </a>
    </li>
    <li class="nav-item">
        <a href="#account-submenu-{{random}}" data-bs-toggle="collapse" data-bs-parent="#dashboard-menu" class="nav-link dropdown-toggle">
            <i class="fas fa-user-cog fa-fw"></i> {{ 'menu.account'|trans}}
        </a>
        <ul id="account-submenu-{{random}}" class="nav flex-column ml-3 collapse {% if routename == "dashboard_user_index" or routename == "dashboard_user_update_profile" or routename == "dashboard_user_update_avatar" or routename == "dashboard_user_update_password" %}show{% endif %}">
            <li class="nav-item">
                <a href="{{ path('dashboard_user_index') }}" class="nav-link {% if routename == "dashboard_user_index" or routename == "dashboard_user_update_profile" or routename == "dashboard_user_update_avatar" or routename == "dashboard_user_update_password" %}active{% endif %}">
                    {{'menu.user_index'|trans}}
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('dashboard_user_update_profile') }}" class="nav-link {% if routename == "dashboard_user_update_profile" %}active{% endif %}">
                    {{ 'menu.user_update_profile'|trans}}
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('dashboard_user_update_avatar') }}" class="nav-link {% if routename == "dashboard_user_update_avatar" %}active{% endif %}">
                    {{ 'menu.user_update_avatar'|trans}}
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('dashboard_user_update_password') }}" class="nav-link {% if routename == "dashboard_user_update_password" %}active{% endif %}">
                    {{ 'menu.user_update_password'|trans}}
                </a>
            </li>
        </ul>
    </li>
{# Editor role sidebar links #}
{% elseif is_granted('ROLE_EDITOR') %}
    <li class="nav-item">
        <a href="{{ path('dashboard_index') }}" class="nav-link {% if routename == "dashboard_index" %}active{% endif %}">
            <i class="bi bi-house fs-5 opacity-60 me-2"></i> {{ 'menu.dashboard_index'|trans}}
        </a>
    </li>
    <li class="nav-item">
        <a href="#account-submenu-{{random}}" data-bs-toggle="collapse" data-bs-parent="#dashboard-menu" class="nav-link dropdown-toggle">
            <i class="fas fa-user-cog fa-fw"></i> {{ 'menu.account'|trans}}
        </a>
        <ul id="account-submenu-{{random}}" class="nav flex-column ml-3 collapse {% if routename == "dashboard_user_index" or routename == "dashboard_user_update_profile" or routename == "dashboard_user_update_avatar" or routename == "dashboard_user_update_password" %}show{% endif %}">
            <li class="nav-item">
                <a href="{{ path('dashboard_user_index') }}" class="nav-link {% if routename == "dashboard_user_index" or routename == "dashboard_user_update_profile" or routename == "dashboard_user_update_avatar" or routename == "dashboard_user_update_password" %}active{% endif %}">
                    {{'menu.user_index'|trans}}
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('dashboard_user_update_profile') }}" class="nav-link {% if routename == "dashboard_user_update_profile" %}active{% endif %}">
                    {{ 'menu.user_update_profile'|trans}}
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('dashboard_user_update_avatar') }}" class="nav-link {% if routename == "dashboard_user_update_avatar" %}active{% endif %}">
                    {{ 'menu.user_update_avatar'|trans}}
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('dashboard_user_update_password') }}" class="nav-link {% if routename == "dashboard_user_update_password" %}active{% endif %}">
                    {{ 'menu.user_update_password'|trans}}
                </a>
            </li>
        </ul>
    </li>
{# User role sidebar links #}
{% elseif is_granted('ROLE_USER') %}
    <li class="nav-item">
        <a href="{{ path('dashboard_index') }}" class="nav-link {% if routename == "dashboard_index" %}active{% endif %}">
            <i class="bi bi-house fs-5 opacity-60 me-2"></i> {{ 'menu.dashboard_index'|trans}}
        </a>
    </li>
    <li class="nav-item">
        <a href="#account-submenu-{{random}}" data-bs-toggle="collapse" data-bs-parent="#dashboard-menu" class="nav-link dropdown-toggle">
            <i class="fas fa-user-cog fa-fw"></i> {{ 'menu.account'|trans}}
        </a>
        <ul id="account-submenu-{{random}}" class="nav flex-column ml-3 collapse {% if routename == "dashboard_user_index" or routename == "dashboard_user_update_profile" or routename == "dashboard_user_update_avatar" or routename == "dashboard_user_update_password" %}show{% endif %}">
            <li class="nav-item">
                <a href="{{ path('dashboard_user_index') }}" class="nav-link {% if routename == "dashboard_user_index" or routename == "dashboard_user_update_profile" or routename == "dashboard_user_update_avatar" or routename == "dashboard_user_update_password" %}active{% endif %}">
                    {{'menu.user_index'|trans}}
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('dashboard_user_update_profile') }}" class="nav-link {% if routename == "dashboard_user_update_profile" %}active{% endif %}">
                    {{ 'menu.user_update_profile'|trans}}
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('dashboard_user_update_avatar') }}" class="nav-link {% if routename == "dashboard_user_update_avatar" %}active{% endif %}">
                    {{ 'menu.user_update_avatar'|trans}}
                </a>
            </li>
            <li class="nav-item">
                <a href="{{ path('dashboard_user_update_password') }}" class="nav-link {% if routename == "dashboard_user_update_password" %}active{% endif %}">
                    {{ 'menu.user_update_password'|trans}}
                </a>
            </li>
        </ul>
    </li>
{% endif %}
{# Logout #}
{% if not is_granted('IS_IMPERSONATOR') %}
    <li class="nav-item">
        <a href="{{ path('auth_logout') }}" class="nav-link">
            <i class="bi bi-door-closed fs-5 opacity-60 me-2"></i> {{ "menu.logout"|trans }}
        </a>
    </li>
{% else %}
    <li class="nav-item">
        <a href="{{ impersonation_exit_path(path('blog_index')) }}" class="nav-link">
            <i class="bi bi-door-closed fs-5 opacity-60 me-2"></i> {{ "menu.impersonation_exit_path"|trans }}
        </a>
    </li>
{% endif %}
